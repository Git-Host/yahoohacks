<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
        <title>Particles</title>
    </head>
    <body style="overflow:hidden">

      <canvas id="projector" width="100" height="1%">Your browser does not support the Canvas element.</canvas>
      <div id="debug"></div>

		
		<script type="text/javascript">
			
			var VELOCITY = 1;
			var PARTICLES = 400;
			
			var mouse = {x:0, y:0};
			var particles = [];
			var colors = [ "#000000","#FF0000","#FFFF00" ];
			var canvas = document.getElementById('projector');
      var context;
      var accelx;
      var accely;
			
			if (canvas && canvas.getContext) {
				context = canvas.getContext('2d');
				
        for( var i = 0; i < PARTICLES; i++ ) {
					particles.push( { 
						x: window.innerWidth/2, 
						y: window.innerHeight/2, 
						vx: 0,
						vy: 0,
						size: 15,
						color: colors[ Math.floor( Math.random() * colors.length ) ]
					} );
				}
				
				Initialize();
			}
			
			function Initialize() {
				//canvas.addEventListener('mousemove', MouseMove, false);
				//window.addEventListener('mousedown', MouseDown, false);
        window.addEventListener("MozOrientation", handleOrientation, true);
				window.addEventListener('resize', ResizeCanvas, false);
				setInterval( TimeUpdate, 40 );
				
				ResizeCanvas();
      }

    function handleOrientation(orientData) { 
        
        accelx = orientData.x;
        accely = orientData.y;
    }
		  	
			function TimeUpdate(e) {
				
				context.clearRect(0, 0, window.innerWidth, window.innerHeight);
				
				var particle = particles[0];
				
			  particle.x += particle.vx;
        particle.y += particle.vy;

        b = document.getElementById("debug");
        b.innerHTML = 
                "<p> x = " + particle.x + "</p>" +
                "<p> y = " + particle.y + "</p>";

						
        if (particle.x > window.innerWidth || particle.x < 0) {
				  particle.vx = 0;
				}
				else {
					particle.vx += accelx;
				}
						
        if (particle.y > window.innerHeight || particle.y < 0) {
					particle.vy = 0;
				} 
				else {
					particle.vy += accely;
				}
						
				particle.currentSize = 15;
					
				context.fillStyle = particle.color;
				context.beginPath();
				context.arc(particle.x,particle.y,particle.currentSize,0,Math.PI*2,true);
				context.closePath();
				context.fill();
					
      }

			function ResizeCanvas(e) {
				canvas.width = window.innerWidth;
				canvas.height = window.innerHeight;
			}
		</script>
    </body>
</html>

